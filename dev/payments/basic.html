<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Basic Concepts</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/docs-test/assets/css/0.styles.ad6f64d8.css" as="style"><link rel="preload" href="/docs-test/assets/js/app.863abe1f.js" as="script"><link rel="preload" href="/docs-test/assets/js/2.25e5da35.js" as="script"><link rel="preload" href="/docs-test/assets/js/14.343fe5ac.js" as="script"><link rel="prefetch" href="/docs-test/assets/js/10.8e0a6ce5.js"><link rel="prefetch" href="/docs-test/assets/js/11.74eff8ae.js"><link rel="prefetch" href="/docs-test/assets/js/12.a9d36d9e.js"><link rel="prefetch" href="/docs-test/assets/js/13.f77f1557.js"><link rel="prefetch" href="/docs-test/assets/js/15.48a15447.js"><link rel="prefetch" href="/docs-test/assets/js/16.bf3ec7da.js"><link rel="prefetch" href="/docs-test/assets/js/17.08067daf.js"><link rel="prefetch" href="/docs-test/assets/js/18.e0bc0087.js"><link rel="prefetch" href="/docs-test/assets/js/19.73e1a645.js"><link rel="prefetch" href="/docs-test/assets/js/20.adee2a8f.js"><link rel="prefetch" href="/docs-test/assets/js/21.97cf92d5.js"><link rel="prefetch" href="/docs-test/assets/js/22.741adef8.js"><link rel="prefetch" href="/docs-test/assets/js/23.57df3964.js"><link rel="prefetch" href="/docs-test/assets/js/24.5e5907bc.js"><link rel="prefetch" href="/docs-test/assets/js/25.4ba49442.js"><link rel="prefetch" href="/docs-test/assets/js/26.0e5fb018.js"><link rel="prefetch" href="/docs-test/assets/js/27.d8c0c44c.js"><link rel="prefetch" href="/docs-test/assets/js/28.95eb4037.js"><link rel="prefetch" href="/docs-test/assets/js/29.3c9590e3.js"><link rel="prefetch" href="/docs-test/assets/js/3.0bfdcb02.js"><link rel="prefetch" href="/docs-test/assets/js/30.8f587462.js"><link rel="prefetch" href="/docs-test/assets/js/4.2a5d96fc.js"><link rel="prefetch" href="/docs-test/assets/js/5.fd255a4a.js"><link rel="prefetch" href="/docs-test/assets/js/6.66b67ff0.js"><link rel="prefetch" href="/docs-test/assets/js/7.a0bf6ad6.js"><link rel="prefetch" href="/docs-test/assets/js/8.eca0465b.js"><link rel="prefetch" href="/docs-test/assets/js/9.0d7158e2.js">
    <link rel="stylesheet" href="/docs-test/assets/css/0.styles.ad6f64d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs-test/" class="home-link router-link-active"><img src="/docs-test/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs-test/dev/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><a href="/docs-test/faq/" class="nav-link">
  FAQ
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs-test/dev/" class="nav-link router-link-active">
  Docs
</a></div><div class="nav-item"><a href="/docs-test/faq/" class="nav-link">
  FAQ
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs-test/dev/" aria-current="page" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/docs-test/dev/payments" class="sidebar-heading clickable router-link-active open"><span>Payments</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs-test/dev/payments/basic.html" aria-current="page" class="active sidebar-link">Basic Concepts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs-test/dev/payments/basic.html#operations" class="sidebar-link">Operations</a></li><li class="sidebar-sub-header"><a href="/docs-test/dev/payments/basic.html#blocks" class="sidebar-link">Blocks</a></li><li class="sidebar-sub-header"><a href="/docs-test/dev/payments/basic.html#flow" class="sidebar-link">Flow</a></li></ul></li><li><a href="/docs-test/dev/payments/sending_transactions.html" class="sidebar-link">Sending Transactions</a></li></ul></section></li><li><a href="/docs-test/dev/contracts/" class="sidebar-link">Smart contracts</a></li><li><a href="/docs-test/dev/bug-bounty.html" class="sidebar-link">Security Policy / Bug Bounty Program</a></li><li><a href="/docs-test/dev/nfts.html" class="sidebar-link">NFTs in zkSync 1.x</a></li><li><a href="/docs-test/dev/swaps.html" class="sidebar-link">Swaps and Limit Orders</a></li><li><a href="/docs-test/dev/events.html" class="sidebar-link">Watching events</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="basic-concepts"><a href="#basic-concepts" class="header-anchor">#</a> Basic Concepts</h1> <p></p><div class="table-of-contents"><ul><li><a href="#operations">Operations</a><ul><li><a href="#priority-operations">Priority operations</a></li><li><a href="#transactions">Transactions</a></li></ul></li><li><a href="#blocks">Blocks</a></li><li><a href="#flow">Flow</a><ul><li><a href="#creating-an-account">Creating an account</a></li><li><a href="#setting-the-signing-key">Setting the signing key</a></li><li><a href="#transferring-funds">Transferring funds</a></li><li><a href="#fees">Fees</a></li><li><a href="#withdrawing-funds">Withdrawing funds</a></li></ul></li></ul></div><p></p> <h2 id="operations"><a href="#operations" class="header-anchor">#</a> Operations</h2> <p>There are two types of operations in zkSync:</p> <ol><li>Priority operations</li> <li>Transactions</li></ol> <h3 id="priority-operations"><a href="#priority-operations" class="header-anchor">#</a> Priority operations</h3> <p>Priority operations are initiated directly on the Ethereum mainnet. For example, the user creates a deposit transaction
to move funds from Ethereum to zkSync. A priority operation can be identified with a numeric ID or hash of the ethereum
transaction that created it.</p> <p>Currently, there are the following types of priority operations:</p> <ul><li><code>Deposit</code>: Moves funds from the Ethereum network to the designated account in the zkSync network. If the recipient
account does not exist yet on the zkSync network, it will be created and a numeric ID will be assigned to the provided
address.</li> <li><code>FullExit</code>: Withdraws funds from the zkSync network to the Ethereum network without interacting with the zkSync
server. This operation can be used as an emergency exit in case of detected censorship from the zkSync server node, or
to withdraw funds in the situation where the signing key for an account in zkSync network cannot be set (e.g. if the
address corresponds to a smart contract).</li></ul> <h3 id="transactions"><a href="#transactions" class="header-anchor">#</a> Transactions</h3> <p>Transactions must be submitted via zkSync operator using the API.</p> <p>Transactions are identified by the hash of their serialized representation.</p> <p>Currently, there are the following types of transactions:</p> <ul><li><code>ChangePubKey</code>: Sets (or changes) the signing key associated with the account. Without a signing key set, no operation
(except for priority operations) can be authorized by the corresponding account.</li> <li><code>Transfer</code>: Transfers funds from one zkSync account to another zkSync account. If the recipient account does not exist
yet on the zkSync network, it will be created and a numeric ID will be assigned to the provided address.</li> <li><code>Swap</code>: Atomically swaps funds between two existing zkSync accounts.</li> <li><code>Withdraw</code>: Withdraws funds from the zkSync network to the Ethereum network.</li> <li><code>ForcedExit</code>: Withdraws funds from the &quot;target&quot; L2 account that doesn't have a signing key set, to the same &quot;target&quot;
address on the Ethereum network. This operation can be used to withdraw funds in the situation where the signing key
for account in zkSync network cannot be set (e.g. if address corresponds to a smart contract).</li> <li><code>MintNFT</code>: Mints an NFT based on provided content hash to the provided &quot;recipient&quot;.</li> <li><code>WithdrawNFT</code>: Withdraw an NFT from the zkSync network to the Ethereum network.</li></ul> <h2 id="blocks"><a href="#blocks" class="header-anchor">#</a> Blocks</h2> <p>All operations inside zkSync are arranged in blocks. After zkSync operator creates a block, it is pushed to the zkSync
smart contract on the Ethereum mainnet with a <code>Commit</code> transaction. When a block is committed, its state is not yet
final. After a couple of minutes, the ZK proof for the correctness of this block is produced. This proof is published on
Ethereum using the <code>Verify</code> transaction. Only after the <code>Verify</code> tx was mined, the new state is considered final.
Multiple blocks can be committed but not verified yet.</p> <p>However, the execution model is slightly different: in order to not make users wait for the block finalization,
transactions are grouped into &quot;mini-blocks&quot; with a much smaller timeout. So, the blocks are being partially applied with
a small interval, so that shortly after receiving the transaction it is executed and L2 state is updated
correspondingly.</p> <p>It means that after sending a transaction, the user has to wait for neither block commitment nor verification, and
transferred funds can be used immediately after corresponding transaction execution.</p> <h2 id="flow"><a href="#flow" class="header-anchor">#</a> Flow</h2> <p>This section describes typical use-cases of zkSync in a sequential manner.</p> <h3 id="creating-an-account"><a href="#creating-an-account" class="header-anchor">#</a> Creating an account</h3> <p>Accounts in zkSync can be created by either doing a deposit of funds from Ethereum or by transferring funds in zkSync to
the desired address. Any of these options will create a new account in the zkSync network if it doesn't exist.</p> <p>However, newly created accounts are not capable of authorizing any transactions from it yet. In order to do so, the
account owner must set the signing key for their account.</p> <h3 id="setting-the-signing-key"><a href="#setting-the-signing-key" class="header-anchor">#</a> Setting the signing key</h3> <p>By default, the signing key for each account is set to the zero value, which marks account as &quot;unowned&quot;. It's a
requirement because of the following reasons:</p> <ul><li>If a transfer to some address is valid in Ethereum, it's also valid in zkSync.</li> <li>Not every address can have a private key (e.g. some smart contracts).</li> <li>Transfers to a user's account may happen before they've been interested in zkSync.</li></ul> <p>Thus, in order to make an account capable of initiating L2 transactions, the user must set a signing key for it via
<code>ChangePubKey</code> transaction.</p> <p>This transaction has to have two signatures:</p> <ul><li>zkSync signature of the transaction data, so that it won't be possible to mutate transaction contents.</li> <li>Ethereum signature proving account ownership.</li></ul> <p>Ethereum signature should be a signature of some pre-defined message. Also, it is possible to authorize <code>ChangePubKey</code>
operation on-chain by sending a corresponding transaction to the zkSync smart contract. Ownership of account will be
checked by both zkSync server and smart contract for better security guarantees.</p> <p>The zkSync signature on all transaction fields must correspond to the public key provided in the transaction.</p> <h3 id="transferring-funds"><a href="#transferring-funds" class="header-anchor">#</a> Transferring funds</h3> <p>As mentioned above, any transfer that is valid in Ethereum, is also valid in zkSync.</p> <p>Users may transfer any amount of funds in either Ether or any supported ERC-20 token. A list of supported tokens can be
found on the <a href="https://zkscan.io/tokens" target="_blank" rel="noopener noreferrer">corresponding explorer page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is also exposed via <a href="/api">API</a>.</p> <p>However, transfer to a non-existent account requires slightly more data to be sent on the smart contract (we have to
include information about the new account), thus the fee for such transfers is slightly higher than the fee for
transfers to existing accounts.</p> <h3 id="fees"><a href="#fees" class="header-anchor">#</a> Fees</h3> <p>zkSync requires fees for transactions in order to cover expenses for network maintenance.</p> <p>Fees for each kind of transaction are calculated based on three main factors:</p> <ul><li>Amount of data that will be sent to the Ethereum network.</li> <li>Current gas price.</li> <li>Cost of computational resources to generate a proof for a block with the transaction.</li></ul> <p>Since we include many transactions in one block, the cost is amortized among all the included transactions, which
results in very small fee values.</p> <p>Additionally, our API provides all the input data used for fee calculation via corresponding <a href="/docs-test/api/v0.1.html#get-tx-fee">API method</a>.</p> <h3 id="withdrawing-funds"><a href="#withdrawing-funds" class="header-anchor">#</a> Withdrawing funds</h3> <p>Currently, there are three ways to withdraw funds from zkSync to an Ethereum account.</p> <p>First one is <code>Withdraw</code> transaction.</p> <p>It is an L2 transaction that can be used to request a withdrawal from your account to any Ethereum address. Same way as
transfers, it has to be signed by the correct zkSync private key.</p> <p>This method is preferred for situations when you own your account and have a private key for it.</p> <p>Second one is <code>ForcedExit</code> transaction.</p> <p>It is an L2 transaction that can be used to request a withdrawal from any unowned account (one that does not have a
signing key set). Neither Ethereum address or amount can be chosen in this transaction: the only option is to request a
withdrawal of <strong>all</strong> available funds of a certain token from the target L2 address to the target L1 address.</p> <p>Also, the transaction initiator should cover the fee, which is exactly the same as for <code>Withdraw</code> operation.</p> <p>This method is preferred if funds should be withdrawn from an account that cannot set the signing key (i.e. smart
contract account), and there exists an L2 account which can send this type of transaction.</p> <p>Third one is <code>FullExit</code> priority operation.</p> <p>This kind of operation is called a &quot;priority operation&quot; since it's initiated from L1 and the smart contract provides
<a href="/docs-test/faq/security.html#security-overview">guarantees</a> that either this request will be processed within a reasonable time
interval, or network will be considered compromised / dead, and the contract will enter an exodus mode.</p> <p>This method is preferred if the user will ever experience censorship from the network operator.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs-test/dev/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/docs-test/dev/payments/sending_transactions.html">
        Sending Transactions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs-test/assets/js/app.863abe1f.js" defer></script><script src="/docs-test/assets/js/2.25e5da35.js" defer></script><script src="/docs-test/assets/js/14.343fe5ac.js" defer></script>
  </body>
</html>
