(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{378:function(t,e,n){"use strict";n.r(e);var a=n(45),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"basic-concepts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#basic-concepts"}},[t._v("#")]),t._v(" Basic Concepts")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#operations"}},[t._v("Operations")]),n("ul",[n("li",[n("a",{attrs:{href:"#priority-operations"}},[t._v("Priority operations")])]),n("li",[n("a",{attrs:{href:"#transactions"}},[t._v("Transactions")])])])]),n("li",[n("a",{attrs:{href:"#blocks"}},[t._v("Blocks")])]),n("li",[n("a",{attrs:{href:"#flow"}},[t._v("Flow")]),n("ul",[n("li",[n("a",{attrs:{href:"#creating-an-account"}},[t._v("Creating an account")])]),n("li",[n("a",{attrs:{href:"#setting-the-signing-key"}},[t._v("Setting the signing key")])]),n("li",[n("a",{attrs:{href:"#transferring-funds"}},[t._v("Transferring funds")])]),n("li",[n("a",{attrs:{href:"#fees"}},[t._v("Fees")])]),n("li",[n("a",{attrs:{href:"#withdrawing-funds"}},[t._v("Withdrawing funds")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"operations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#operations"}},[t._v("#")]),t._v(" Operations")]),t._v(" "),n("p",[t._v("There are two types of operations in zkSync:")]),t._v(" "),n("ol",[n("li",[t._v("Priority operations")]),t._v(" "),n("li",[t._v("Transactions")])]),t._v(" "),n("h3",{attrs:{id:"priority-operations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#priority-operations"}},[t._v("#")]),t._v(" Priority operations")]),t._v(" "),n("p",[t._v("Priority operations are initiated directly on the Ethereum mainnet. For example, the user creates a deposit transaction\nto move funds from Ethereum to zkSync. A priority operation can be identified with a numeric ID or hash of the ethereum\ntransaction that created it.")]),t._v(" "),n("p",[t._v("Currently, there are the following types of priority operations:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("Deposit")]),t._v(": Moves funds from the Ethereum network to the designated account in the zkSync network. If the recipient\naccount does not exist yet on the zkSync network, it will be created and a numeric ID will be assigned to the provided\naddress.")]),t._v(" "),n("li",[n("code",[t._v("FullExit")]),t._v(": Withdraws funds from the zkSync network to the Ethereum network without interacting with the zkSync\nserver. This operation can be used as an emergency exit in case of detected censorship from the zkSync server node, or\nto withdraw funds in the situation where the signing key for an account in zkSync network cannot be set (e.g. if the\naddress corresponds to a smart contract).")])]),t._v(" "),n("h3",{attrs:{id:"transactions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transactions"}},[t._v("#")]),t._v(" Transactions")]),t._v(" "),n("p",[t._v("Transactions must be submitted via zkSync operator using the API.")]),t._v(" "),n("p",[t._v("Transactions are identified by the hash of their serialized representation.")]),t._v(" "),n("p",[t._v("Currently, there are the following types of transactions:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("ChangePubKey")]),t._v(": Sets (or changes) the signing key associated with the account. Without a signing key set, no operation\n(except for priority operations) can be authorized by the corresponding account.")]),t._v(" "),n("li",[n("code",[t._v("Transfer")]),t._v(": Transfers funds from one zkSync account to another zkSync account. If the recipient account does not exist\nyet on the zkSync network, it will be created and a numeric ID will be assigned to the provided address.")]),t._v(" "),n("li",[n("code",[t._v("Swap")]),t._v(": Atomically swaps funds between two existing zkSync accounts.")]),t._v(" "),n("li",[n("code",[t._v("Withdraw")]),t._v(": Withdraws funds from the zkSync network to the Ethereum network.")]),t._v(" "),n("li",[n("code",[t._v("ForcedExit")]),t._v(': Withdraws funds from the "target" L2 account that doesn\'t have a signing key set, to the same "target"\naddress on the Ethereum network. This operation can be used to withdraw funds in the situation where the signing key\nfor account in zkSync network cannot be set (e.g. if address corresponds to a smart contract).')]),t._v(" "),n("li",[n("code",[t._v("MintNFT")]),t._v(': Mints an NFT based on provided content hash to the provided "recipient".')]),t._v(" "),n("li",[n("code",[t._v("WithdrawNFT")]),t._v(": Withdraw an NFT from the zkSync network to the Ethereum network.")])]),t._v(" "),n("h2",{attrs:{id:"blocks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#blocks"}},[t._v("#")]),t._v(" Blocks")]),t._v(" "),n("p",[t._v("All operations inside zkSync are arranged in blocks. After zkSync operator creates a block, it is pushed to the zkSync\nsmart contract on the Ethereum mainnet with a "),n("code",[t._v("Commit")]),t._v(" transaction. When a block is committed, its state is not yet\nfinal. After a couple of minutes, the ZK proof for the correctness of this block is produced. This proof is published on\nEthereum using the "),n("code",[t._v("Verify")]),t._v(" transaction. Only after the "),n("code",[t._v("Verify")]),t._v(" tx was mined, the new state is considered final.\nMultiple blocks can be committed but not verified yet.")]),t._v(" "),n("p",[t._v('However, the execution model is slightly different: in order to not make users wait for the block finalization,\ntransactions are grouped into "mini-blocks" with a much smaller timeout. So, the blocks are being partially applied with\na small interval, so that shortly after receiving the transaction it is executed and L2 state is updated\ncorrespondingly.')]),t._v(" "),n("p",[t._v("It means that after sending a transaction, the user has to wait for neither block commitment nor verification, and\ntransferred funds can be used immediately after corresponding transaction execution.")]),t._v(" "),n("h2",{attrs:{id:"flow"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flow"}},[t._v("#")]),t._v(" Flow")]),t._v(" "),n("p",[t._v("This section describes typical use-cases of zkSync in a sequential manner.")]),t._v(" "),n("h3",{attrs:{id:"creating-an-account"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#creating-an-account"}},[t._v("#")]),t._v(" Creating an account")]),t._v(" "),n("p",[t._v("Accounts in zkSync can be created by either doing a deposit of funds from Ethereum or by transferring funds in zkSync to\nthe desired address. Any of these options will create a new account in the zkSync network if it doesn't exist.")]),t._v(" "),n("p",[t._v("However, newly created accounts are not capable of authorizing any transactions from it yet. In order to do so, the\naccount owner must set the signing key for their account.")]),t._v(" "),n("h3",{attrs:{id:"setting-the-signing-key"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setting-the-signing-key"}},[t._v("#")]),t._v(" Setting the signing key")]),t._v(" "),n("p",[t._v('By default, the signing key for each account is set to the zero value, which marks account as "unowned". It\'s a\nrequirement because of the following reasons:')]),t._v(" "),n("ul",[n("li",[t._v("If a transfer to some address is valid in Ethereum, it's also valid in zkSync.")]),t._v(" "),n("li",[t._v("Not every address can have a private key (e.g. some smart contracts).")]),t._v(" "),n("li",[t._v("Transfers to a user's account may happen before they've been interested in zkSync.")])]),t._v(" "),n("p",[t._v("Thus, in order to make an account capable of initiating L2 transactions, the user must set a signing key for it via\n"),n("code",[t._v("ChangePubKey")]),t._v(" transaction.")]),t._v(" "),n("p",[t._v("This transaction has to have two signatures:")]),t._v(" "),n("ul",[n("li",[t._v("zkSync signature of the transaction data, so that it won't be possible to mutate transaction contents.")]),t._v(" "),n("li",[t._v("Ethereum signature proving account ownership.")])]),t._v(" "),n("p",[t._v("Ethereum signature should be a signature of some pre-defined message. Also, it is possible to authorize "),n("code",[t._v("ChangePubKey")]),t._v("\noperation on-chain by sending a corresponding transaction to the zkSync smart contract. Ownership of account will be\nchecked by both zkSync server and smart contract for better security guarantees.")]),t._v(" "),n("p",[t._v("The zkSync signature on all transaction fields must correspond to the public key provided in the transaction.")]),t._v(" "),n("h3",{attrs:{id:"transferring-funds"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferring-funds"}},[t._v("#")]),t._v(" Transferring funds")]),t._v(" "),n("p",[t._v("As mentioned above, any transfer that is valid in Ethereum, is also valid in zkSync.")]),t._v(" "),n("p",[t._v("Users may transfer any amount of funds in either Ether or any supported ERC-20 token. A list of supported tokens can be\nfound on the "),n("a",{attrs:{href:"https://zkscan.io/tokens",target:"_blank",rel:"noopener noreferrer"}},[t._v("corresponding explorer page"),n("OutboundLink")],1),t._v(". It is also exposed via "),n("a",{attrs:{href:"/api"}},[t._v("API")]),t._v(".")]),t._v(" "),n("p",[t._v("However, transfer to a non-existent account requires slightly more data to be sent on the smart contract (we have to\ninclude information about the new account), thus the fee for such transfers is slightly higher than the fee for\ntransfers to existing accounts.")]),t._v(" "),n("h3",{attrs:{id:"fees"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fees"}},[t._v("#")]),t._v(" Fees")]),t._v(" "),n("p",[t._v("zkSync requires fees for transactions in order to cover expenses for network maintenance.")]),t._v(" "),n("p",[t._v("Fees for each kind of transaction are calculated based on three main factors:")]),t._v(" "),n("ul",[n("li",[t._v("Amount of data that will be sent to the Ethereum network.")]),t._v(" "),n("li",[t._v("Current gas price.")]),t._v(" "),n("li",[t._v("Cost of computational resources to generate a proof for a block with the transaction.")])]),t._v(" "),n("p",[t._v("Since we include many transactions in one block, the cost is amortized among all the included transactions, which\nresults in very small fee values.")]),t._v(" "),n("p",[t._v("Additionally, our API provides all the input data used for fee calculation via corresponding "),n("RouterLink",{attrs:{to:"/api/v0.1.html#get-tx-fee"}},[t._v("API method")]),t._v(".")],1),t._v(" "),n("h3",{attrs:{id:"withdrawing-funds"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#withdrawing-funds"}},[t._v("#")]),t._v(" Withdrawing funds")]),t._v(" "),n("p",[t._v("Currently, there are three ways to withdraw funds from zkSync to an Ethereum account.")]),t._v(" "),n("p",[t._v("First one is "),n("code",[t._v("Withdraw")]),t._v(" transaction.")]),t._v(" "),n("p",[t._v("It is an L2 transaction that can be used to request a withdrawal from your account to any Ethereum address. Same way as\ntransfers, it has to be signed by the correct zkSync private key.")]),t._v(" "),n("p",[t._v("This method is preferred for situations when you own your account and have a private key for it.")]),t._v(" "),n("p",[t._v("Second one is "),n("code",[t._v("ForcedExit")]),t._v(" transaction.")]),t._v(" "),n("p",[t._v("It is an L2 transaction that can be used to request a withdrawal from any unowned account (one that does not have a\nsigning key set). Neither Ethereum address or amount can be chosen in this transaction: the only option is to request a\nwithdrawal of "),n("strong",[t._v("all")]),t._v(" available funds of a certain token from the target L2 address to the target L1 address.")]),t._v(" "),n("p",[t._v("Also, the transaction initiator should cover the fee, which is exactly the same as for "),n("code",[t._v("Withdraw")]),t._v(" operation.")]),t._v(" "),n("p",[t._v("This method is preferred if funds should be withdrawn from an account that cannot set the signing key (i.e. smart\ncontract account), and there exists an L2 account which can send this type of transaction.")]),t._v(" "),n("p",[t._v("Third one is "),n("code",[t._v("FullExit")]),t._v(" priority operation.")]),t._v(" "),n("p",[t._v('This kind of operation is called a "priority operation" since it\'s initiated from L1 and the smart contract provides\n'),n("RouterLink",{attrs:{to:"/faq/security.html#security-overview"}},[t._v("guarantees")]),t._v(" that either this request will be processed within a reasonable time\ninterval, or network will be considered compromised / dead, and the contract will enter an exodus mode.")],1),t._v(" "),n("p",[t._v("This method is preferred if the user will ever experience censorship from the network operator.")])])}),[],!1,null,null,null);e.default=r.exports}}]);